
<html>

<head>
  <title>JavaScript Line Chart</title>
  <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-base.min.js"></script>
  <script id="myJson" type="application/json"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <style type="text/css">
    html,
    body,
    #container {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
</head>

<body>
  <select id="dropbox" onchange="plotGraph()">
    <option disabled selected>Select PPD</option>
  </select>
  <div id="container"></div>
  <script type="text/javascript">
    // All the code for the JS line chart will come here
    var dropboxSelect = $('#dropbox');
    var jsonData;
    function plotData() {
      $.getJSON("per-results.json", function (json) {
        for (var key in json) {
          var val = json[key];
          dropboxSelect.append('<option value='+key+'>'+key+'</option>');
        }
        jsonData = json;
      });
    }
    
    plotData();

    // // create a line chart
    var chart = anychart.line();

    // // set the container id for the line chart
    chart.container('container');


    function plotGraph() {
      // get the selected dropdown value
      var selectedKey = dropboxSelect.val()
      
      // set the data to empty array
      chart.data([]);

      // select data to display
      var data = jsonData[selectedKey];

      // // create a data set on our data
      var dataSet = anychart.data.set(data);

      // // map data for the line chart,
      // // take x from the zero column and value from the first column
      var seriesData = dataSet.mapAs({ x: 1, value: 0 });

      // // create a line series with the mapped data
      var lineChart = chart.line(seriesData);

      // // draw the line chart
      chart.draw();
    }
  </script>
</body>

</html>
